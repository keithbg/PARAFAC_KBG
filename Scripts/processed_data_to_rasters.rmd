---
title: "processed data to rasters"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r}
library(tidyverse)
library(raster)
```

### Import data

```{r message=FALSE, warning=FALSE}

processed <- list.files("EEMs_EX_3nm_corrected_subset")

data <- list()

for (i in 1:length(processed)) {
  data[[i]] <- read_tsv(paste0("../EEMS_EX_3nm_corrected_subset/", processed[i]), skip = 0, col_names = TRUE)
  names(data)[i] <- processed[i]
}

```

### Fix column names

```{r}

data <- lapply(data, setNames, nm = c("wavelength", seq(600, 240, -3)))

```

### Orient matrix correctly and generate raster

```{r }

rasters <- lapply(data, function(x) raster(data.matrix(x[250:1,122:2]), xmn=240, xmx = 600, ymn = 212, ymx = 620))

rasStack <-stack(rasters)

animate(rasStack, zlim = c(-1, 4), pause = .05, n = 1)

```

